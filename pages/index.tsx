import type { NextPage } from 'next'
import Head from 'next/head'

import { useStateContext } from '../contexts/ContextProvider'

import { AppLogo, SideBarMenu, RoomInfo, AudioVideoCall, SideContent, CodeEditor, EditorOutput } from '../components'

const Home: NextPage = () => {
  // Get global state from ContextProvider
  const { states, langStates }:any = useStateContext()

  const { colSideHide, colOutputHide, colTheme } = states
  const { ideCode, ideLang } = langStates

  return (
    <div>
      <Head>
        <title>Collaborative Playground</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className='flex flex-row w-full h-screen items-start justify-start'>
        <div className='flex flex-col w-1/12 h-full items-center justify-center z-40'>
          <AppLogo />
          <SideBarMenu />
        </div>

        <div className='flex flex-col w-11/12 h-full items-center justify-start'>
          <div className='flex w-full h-1/6 bg-[url("/images/bg-3.jpg")] bg-center bg-no-repeat bg-cover items-center justify-between'>
            <RoomInfo />
            <AudioVideoCall />
          </div>

          <div className='flex flex-row w-full h-5/6 items-center justify-start transition-all ease-in-out duration-500'>
            <SideContent />

            <div className={`flex flex-col ${colSideHide ? 'w-full' : 'w-8/12'} h-full items-center justify-start transition-all ease-in-out duration-500 z-40`}>
                <div className={`flex flex-col ${colOutputHide ? 'h-full' : 'h-4/6'} w-full items-center justify-center transition-all ease-in-out duration-500`}>
                  <CodeEditor
                    code={ideCode}
                    language={ideLang}
                    theme={colTheme}
                  />
                </div>

                <EditorOutput />
            </div>
          </div>
        </div>
      </main>
    </div>
  )
}

export default Home
